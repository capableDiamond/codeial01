let updateUserName=document.getElementById("update-user-name"),updateUserEmail=document.getElementById("update-user-email"),updateUserAvatar=document.getElementById("update-user-avatar"),updateUserSubmitButton=document.getElementById("update-user-submit-button"),imagePreview=document.getElementById("image-preview"),userUpdateForm=$("#user-update-form"),profilePicture=$("#user-avatar");function checkFileSize(){if(updateUserAvatar.files.length>0){updateUserAvatar.files.item(0).size/1048576>2?alert("Please select a file less than 2MB."):checkFileExtension(updateUserAvatar)&&(updateUserSubmitButton.disabled=!1,showImagePreview(imagePreview,updateUserAvatar))}else updateUserSubmitButton.disabled=!1}function checkFileExtension(e){let t=e.value.toLowerCase();return!!(t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".png"))||(alert("Please upload a file of type jpeg, jpg or png"),!1)}function showImagePreview(e,t){let a=URL.createObjectURL(t.files[0]);e.innerHTML='<img src ="'+a+'">'}function handleFormSubmission(e){e.preventDefault();let t=userUpdateForm[0],a=new FormData(t);$.ajax({type:"post",enctype:"multipart/form-data",url:e.target.action,data:a,processData:!1,contentType:!1,cache:!1,success:function(e){profilePicture.attr("src",e.data.user.avatar),imagePreview.innerHTML="",$('#user-update-form input[name="name"]').attr("value",e.data.user.name),$('#user-update-form input[name="email"]').attr("value",e.data.user.email),$("#greeting").text("Hi, "+e.data.user.name),new Noty({theme:"relax",text:"User Updated",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log("Error at user_profilejs in assets",e)}})}updateUserName.addEventListener("change",checkFileSize),updateUserEmail.addEventListener("change",checkFileSize),updateUserAvatar.addEventListener("change",checkFileSize),userUpdateForm.submit(e=>{handleFormSubmission(e)});